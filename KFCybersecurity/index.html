<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KFCybersecurity Command Center</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <div class="sidebar">
        <div class="logo">
            <i class="fas fa-shield-alt"></i> KFCybersecurity
        </div>
        <div class="nav-item active" onclick="switchView('dashboard')"><i class="fas fa-tachometer-alt"></i> Overview</div>
        <div class="nav-item" onclick="switchView('clients')"><i class="fas fa-users"></i> Clients</div>
        <div class="nav-item"><i class="fas fa-box-open"></i> Marketplace</div>
        <div class="nav-item"><i class="fas fa-file-contract"></i> Compliance</div>
        <div style="margin-top: auto;">
            <div class="nav-item"><i class="fas fa-cog"></i> Settings</div>
            <div class="nav-item" style="color: var(--danger)"><i class="fas fa-sign-out-alt"></i> Logout</div>
        </div>
    </div>

    <div class="main">
        <div class="header">
            <h2 id="page-title">Service Command Center</h2>
            <div style="display: flex; gap: 20px; align-items: center;">
                <div class="client-selector" id="client-select-container">
                    <span style="color: var(--text-secondary); font-size: 0.9rem; margin-right: 10px;">Managing:</span>
                    <select id="clientSelect" onchange="renderDashboard()">
                        <option value="Acme Corp">Acme Corp</option>
                        <option value="Globex Inc">Globex Inc</option>
                        <option value="Soylent Corp">Soylent Corp</option>
                    </select>
                </div>
                <button class="mode-toggle" onclick="toggleUserMode()" id="modeBtn">
                    <i class="fas fa-user-secret"></i> View as MSP Admin
                </button>
            </div>
        </div>

        <div class="content">
            <div id="dashboard-grid" class="grid">
                </div>
        </div>
    </div>

    <div class="overlay" id="appModal">
        <div class="modal">
            <div class="modal-header">
                <div>
                    <h2 id="modalTitle">Endpoint Sentinel</h2>
                    <span style="color: var(--success); font-size: 0.8rem;">‚óè Live Connection Established</span>
                </div>
                <button class="btn-outline" style="width: auto; padding: 5px 10px;" onclick="closeModal()"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <div class="modal-grid">
                    <div style="background: var(--bg-panel); padding: 20px; border-radius: 8px;">
                        <h4 style="margin-bottom: 15px;">Live Threat Activity</h4>
                        <canvas id="threatChart" height="150"></canvas>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <div class="stat-box">
                            <div class="stat-num" id="stat1">98%</div>
                            <div style="color: var(--text-secondary)">Compliance Score</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-num" style="color: var(--danger)" id="stat2">0</div>
                            <div style="color: var(--text-secondary)">Active Threats</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-num" style="color: var(--success)" id="stat3">142</div>
                            <div style="color: var(--text-secondary)">Agents Online</div>
                        </div>
                    </div>
                </div>
                
                <h4 style="margin: 20px 0 10px;">Application Controls</h4>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px;">
                    <button class="btn btn-outline"><i class="fas fa-sync"></i> Force Scan</button>
                    <button class="btn btn-outline"><i class="fas fa-file-download"></i> Export Logs</button>
                    <button class="btn btn-outline"><i class="fas fa-wrench"></i> Configure Policies</button>
                    <button class="btn btn-outline" style="border-color: var(--danger); color: var(--danger);"><i class="fas fa-power-off"></i> Isolate Host</button>
                </div>

                <h4 style="margin: 20px 0 10px;">Recent Logs</h4>
                <div style="background: #000; padding: 15px; border-radius: 6px; font-family: monospace; color: #33ff00; height: 150px; overflow-y: auto;">
                    > [12:01:45] System check initiated...<br>
                    > [12:01:48] Agent #442 connected from 192.168.1.105<br>
                    > [12:02:10] Policy update received from Master Server<br>
                    > [12:05:00] Routine scan completed. 0 threats found.<br>
                    > [12:06:12] Heartbeat signal sent...
                </div>
            </div>
        </div>
    </div>

    <div class="toast-container" id="toastContainer"></div>

    <script src="app.js"></script>
</body>
</html>
